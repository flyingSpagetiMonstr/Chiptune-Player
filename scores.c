#ifndef SCORES_C
#define SCORES_C

#include "presets.c"

// #define _BWV846
// #define IEVAN_POLKKA

// =========================================================

#define NEW

#ifndef NEW
sound anthem[] = {
    // I
    {E5, 3}, {O_, 0.25}, {B4, 0.25}, // measure 1
    {E5, 1}, {B4, 0.75}, {C5, 0.25}, {D5, 1.0}, {G4, 0.50}, {G4, 0.50}, // measure 2
    {C5, 1}, {B4, 0.75}, {A4, 0.25}, {B4, 1.0}, {E4, 0.50}, {E4, 0.50}, // measure 3
    {F4, 1}, {F4, 0.75}, {G4, 0.25}, {A4, 1.0}, {A4, 0.75}, {B4, 0.25}, // measure 4
    {C5, 1}, {D5, 0.50}, {E5, 0.50}, {F5, 1.5}, {B4, 0.50}, // measure 5
    {G5, 1}, {F5, 0.75}, {E5, 0.25}, {F5, 1.0}, {D5, 0.50}, {B4, 0.50}, // measure 6
    {E5, 1}, {D5, 0.75}, {C5, 0.25}, {D5, 1.0}, {G4, 0.50}, {G4, 0.50}, // measure 7
    {C5, 1}, {B4, 0.75}, {A4, 0.25}, {B4, 1.0}, {E4, 0.75}, {E4, 0.25}, // measure 8
    {E5, 1}, {D5, 0.75}, {C5, 0.25}, {B4, 1.5}, {O_, 0.50}, // measure 9
    {O_, 2} // ###
};
void init_score()
{
    for (int i = 0; i < len; i++)
    {
		anthem->duration *= 0.8;
        // E5;
    }
}
#else
sound anthem[] = {
    {40, 2400000}, { 0,  200000}, {35,  200000},
    {40,  800000}, {35,  600000}, {37,  200000}, {39,  800000}, {32,  400000}, {32,  400000},
    {37,  800000}, {35,  600000}, {33,  200000}, {35,  800000}, {28,  400000}, {28,  400000},
    {30,  800000}, {30,  600000}, {32,  200000}, {33,  800000}, {33,  600000}, {35,  200000},
    {37,  800000}, {39,  400000}, {40,  400000}, {42, 1200000}, {35,  400000},
    {44,  800000}, {42,  600000}, {40,  200000}, {42,  800000}, {39,  400000}, {35,  400000},
    {40,  800000}, {39,  600000}, {37,  200000}, {39,  800000}, {32,  400000}, {32,  400000},
    {37,  800000}, {35,  600000}, {33,  200000}, {35,  800000}, {28,  600000}, {28,  200000},
    {40,  800000}, {39,  600000}, {37,  200000}, {35, 1200000}, { 0,  400000},
    {00, 2000000}
};
#endif
int len = sizeof(anthem)/sizeof(sound);


// =========================================================

#ifdef _BWV846
sound BWV846[] = {
    // measure 1
    {C4, 0.25}, {E4, 0.25},
        {G4, 0.25}, {C5, 0.25}, {E5, 0.25},
        {G4, 0.25}, {C5, 0.25}, {E5, 0.25}, // SUM = 2
    {C4, 0.25}, {E4, 0.25},
        {G4, 0.25}, {C5, 0.25}, {E5, 0.25},
        {G4, 0.25}, {C5, 0.25}, {E5, 0.25},

    // measure 2
    {C4, 0.25}, {E4 - 1, 0.25},
        {G4 + 1, 0.25}, {C5 + 1, 0.25}, {E5 + 1, 0.25},
        {G4 + 1, 0.25}, {C5 + 1, 0.25}, {E5 + 1, 0.25},
    {C4, 0.25}, {E4 - 1, 0.25},
        {G4 + 1, 0.25}, {C5 + 1, 0.25}, {E5 + 1, 0.25},
        {G4 + 1, 0.25}, {C5 + 1, 0.25}, {E5 + 1, 0.25},

    // measure 3
    {C4 - 1, 0.25}, {E4 - 1, 0.25},
        {G4, 0.25}, {C5 + 1, 0.25}, {E5 + 1, 0.25},
        {G4, 0.25}, {C5 + 1, 0.25}, {E5 + 1, 0.25},
    {C4 - 1, 0.25}, {E4 - 1, 0.25},
        {G4, 0.25}, {C5 + 1, 0.25}, {E5 + 1, 0.25},
        {G4, 0.25}, {C5 + 1, 0.25}, {E5 + 1, 0.25},
    
    // measure 4
    // (0.5 + 0.25*6) * 2
    // = 1 + 0.25 * 4 * 3
    // = 4

    // 2s

    // ...
    {O_, 2} // ###
};
int BWV846_len = sizeof(BWV846)/sizeof(sound);
void init_BWV846()
{
    for (int i = 0; i < BWV846_len; i++)
    {
		// BWV846->duration *= 0.8;
    }
}
#endif

// =========================================================
#ifdef IEVAN_POLKKA
sound Ievan_polkka[] = {
    // I
    {A5, 0.5}, {A5, 0.5}, {G5, 0.5}, {F5, 0.25}, {F5, 0.25}, 
        {E5, 0.5}, {C5, 0.25}, {C5, 0.75}, {E5, 0.5},
    {G5, 0.5}, {G5, 0.25}, {G5, 0.25}, {F5, 0.5}, {E5, 0.5}, 
        {E5 + 1, 0.5}, {C5 + 1, 0.5}, {C5 + 1, 0.5}, {E5 + 1, 0.5},
    {A5, 0.25}, {A5, 0.25}, {A5, 0.25}, {A5, 0.25}, {G5, 0.5}, {F5, 0.5},
        {E5, 0.5}, {C5, 0.25}, {C5, 0.5}, {C5, 0.25}, {E5, 0.5},
    {G5, 0.25}, {G5, 0.25}, {G5, 0.5}, {F5, 0.5}, {E5, 0.25}, {E5, 0.25},
        {F5, 0.5}, {D5, 0.25}, {D5, 1}, {O_, 0.25},
    
    // II
    {A4, 0.5}, {D5, 0.5}, {D5, 0.75}, {E5, 0.25}, // 2
        {F5, 0.25}, {F5, 0.25}, {D5, 0.25}, {D5, 0.25}, {D5, 0.5}, {F5, 0.25}, {F5, 0.25}, // 2
    {E5, 0.5}, {C5, 0.5}, {C5, 0.5}, {E5, 0.5},
        {F5, 0.5}, {D5, 0.5}, {D5, 0.5}, {D5, 0.25}, {D5, 0.25}, 
    {A4, 0.5}, {D5, 0.5}, {D5, 0.75}, {E5, 0.25}, // 2
        {F5, 0.25}, {O_, 0.25}, {D5, 0.5}, /*1*/ {D5, 0.25}, {D5, 0.25}, {D5, 0.25}, {F5, 0.25},
    // 8
    {A5, 0.25}, {A5, 0.25}, {A5, 0.25}, {G5, 0.25},
        {F5, 0.25}, {O_, 0.25}, {E5, 0.5},
        {F5, 0.5}, {D5, 0.25}, {O_, 0.25},
        {D5, 0.5}, {D5, 0.25}, {D5, 0.25},
    {A5, 0.5}, {A5, 0.5}, {G5, 0.5}, {F5, 0.5},
        {E5, 0.5}, {C5, 0.25}, {C5, 0.25 + 0.25}, {C5, 0.25}, {C5, 0.25}, {E5, 0.25},
    {G5, 0.25}, {G5, 0.25}, {G5, 0.25}, {G5, 0.25},
        {F5, 0.25}, {F5, 0.25}, {E5, 0.25}, {E5, 0.25},
        {F5, 0.5}, {D5, 0.25}, {D5, 0.25 + 0.75}, {D5, 0.25 /*Slur*/},
    {A5, 0.5}, {A5, 0.5}, {G5, 0.5}, {F5, 0.5},
        {E5, 0.5}, {C5, 0.5},
        {C5, 0.25}, {C5, 0.25}, {C5, 0.25}, {E5, 0.25},
    {G5, 0.25}, {G5, 0.25}, {G5, 0.25}, {G5, 0.25}, {F5, 0.5}, {E5, 0.5},
        {F5, 0.5}, {D5, 0.25}, {D5, 0.25 + 1},
    // ...
    {O_, 2} // ###
};
int Ievan_polkka_len = sizeof(Ievan_polkka)/sizeof(sound);

void init_Ievan_polkka()
{
    for (int i = 0; i < Ievan_polkka_len; i++)
    {
		// Ievan_polkka->duration *= 0.8;
        if (Ievan_polkka[i].note == B2
            || Ievan_polkka[i].note == B3
            || Ievan_polkka[i].note == B4
            || Ievan_polkka[i].note == B5) // flat: A B E
        {
            Ievan_polkka[i].note -= 1;
        }
    }
}
#endif


#endif // SCORES_C



    // init_BWV846();
    // play_score(BWV846, BWV846_len);

    // init_Ievan_polkka();
    // play_score(Ievan_polkka, Ievan_polkka_len);


//   while (1)
//   {
// 		HAL_GPIO_WritePin(GPIOG,GPIO_PIN_6,GPIO_PIN_SET);//?ò??·??ù?÷
// 		HAL_Delay(2);//50HZ????
// 		HAL_GPIO_WritePin(GPIOG,GPIO_PIN_6,GPIO_PIN_RESET);//??±?·??ù?÷
// 		HAL_Delay(2);//50HZ????
//   }